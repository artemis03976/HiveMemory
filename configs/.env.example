# HiveMemory 环境配置示例
# 复制此文件为 .env 并填入实际值

# ======================
# LLM 配置 (LiteLLM)
# ======================

# Worker Agent LLM (用户可自定义)
WORKER_LLM_MODEL=gpt-4o
WORKER_LLM_API_KEY=your_openai_api_key_here
WORKER_LLM_API_BASE=https://api.openai.com/v1

# Librarian Agent (Patchouli) LLM (默认 DeepSeek)
LIBRARIAN_LLM_MODEL=deepseek/deepseek-chat
LIBRARIAN_LLM_API_KEY=your_deepseek_api_key_here
LIBRARIAN_LLM_API_BASE=https://api.deepseek.com

# ======================
# Embedding 配置
# ======================

# 使用本地 BGE-M3 模型
EMBEDDING_MODEL=BAAI/bge-m3
EMBEDDING_DEVICE=cpu  # 可选: cpu, cuda, mps
EMBEDDING_BATCH_SIZE=32

# ======================
# 数据库配置
# ======================

# Qdrant 向量数据库
QDRANT_HOST=localhost
QDRANT_PORT=6333
QDRANT_GRPC_PORT=6334
QDRANT_API_KEY=  # 本地部署无需填写
QDRANT_COLLECTION_NAME=hivememory_main

# Redis 配置
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=hivememory_redis_pass
REDIS_DB=0

# ======================
# 系统配置
# ======================

# 日志级别
LOG_LEVEL=INFO  # 可选: DEBUG, INFO, WARNING, ERROR

# 记忆缓冲区配置
BUFFER_MAX_MESSAGES=5
BUFFER_TIMEOUT_SECONDS=900  # 15分钟

# 向量维度
VECTOR_DIMENSION=1024

# 检索配置
RETRIEVAL_TOP_K=5
RETRIEVAL_SCORE_THRESHOLD=0.75

# ======================
# 感知层配置
# ======================
# 注意：环境变量映射到 perception.semantic_flow 或 perception.simple 子配置

# 感知层类型选择
PERCEPTION_LAYER_TYPE=semantic_flow  # 可选: semantic_flow, simple
PERCEPTION_ENABLE=true  # 是否启用感知层

# SemanticFlowPerceptionLayer 配置 (映射到 perception.semantic_flow)
PERCEPTION_IDLE_TIMEOUT=900  # 空闲超时时间（秒）
PERCEPTION_SCAN_INTERVAL=30  # 扫描间隔（秒）
PERCEPTION_SEMANTIC_THRESHOLD=0.6  # 语义相似度阈值
PERCEPTION_SHORT_TEXT_THRESHOLD=50  # 短文本强吸附阈值
PERCEPTION_EMA_ALPHA=0.3  # EMA 系数
PERCEPTION_MAX_TOKENS=8192  # 单次处理的最大 Token 数
PERCEPTION_ENABLE_SMART_SUMMARY=false  # 是否启用智能摘要

# 感知层 Embedding 配置（可选，覆盖全局配置）
# PERCEPTION_EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2
# PERCEPTION_EMBEDDING_DEVICE=cpu
# PERCEPTION_EMBEDDING_CACHE_DIR=

# SimplePerceptionLayer 配置 (映射到 perception.simple)
PERCEPTION_SIMPLE_MESSAGE_THRESHOLD=6  # 消息数触发阈值
PERCEPTION_SIMPLE_TIMEOUT=900  # 超时时间（秒）
PERCEPTION_SIMPLE_SEMANTIC_TRIGGER=true  # 是否启用语义边界触发

# ======================
# 安全配置
# ======================

SECRET_KEY=your_secret_key_for_jwt_signing
ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8501

# ======================
# 开发选项
# ======================

DEBUG_MODE=true
ENABLE_LOGGING=true
LOG_FILE_PATH=./logs/hivememory.log
